<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <title>8th Wall Web: A-FRAME</title>

  <!-- We've included a slightly modified version of A-Frame, which fixes some polish concerns -->
  <script src="//cdn.8thwall.com/web/aframe/8frame-0.8.2.min.js"></script>

  <!-- XR Extras - provides utilities like load screen, almost there, and error handling.
         See github.com/8thwall/web/tree/master/xrextras -->
  <script src="//cdn.8thwall.com/web/xrextras/xrextras.js"></script>

  <!-- 8thWall Web - Replace the app key here with your own app key -->
  <script async src="https://apps.8thwall.com/xrweb?appKey=hZgvYGmf38qwmtbulYqPOuGUvzqRi2UhQa9tTJ4fs5l7nhDQ0944Q3YmxVfRaVoOzOxhV1"></script>

  <script type="module" src="./app.js" </script> </head> <script>
    const modelList = ["heart1", "heart2", "heart3", "heart4", "heart5", "heart6", "heart7", "heart8", "heart9", "heart10", "heart11", "heart12"];

    AFRAME.registerComponent('clickhandler', {
      init: function() {
        let count = 0;
        this.el.addEventListener('click', () => {
          setInterval(function() {
            if (count < 50) {
              count += 1;
              console.log(count);

              console.log("HeartClick")
              let randIndex = Math.floor(Math.random() * modelList.length);
              console.log(randIndex);
              heart.removeAttribute('src')
              heart.setAttribute('src', `#${modelList[randIndex]}`)

            };
          }, 50);
        });
      }
    });
    //
  </script>

  <link rel="stylesheet" href="index.css">



<body>
  <button id="swap-cam-btn" class="toggle">Camera Direction: back</button>

  <a-scene cursor="rayOrigin: mouse; fuse: false" raycaster="objects: [clickhandler];" xrextras-almost-there xrextras-loading xrextras-runtime-error xrextras-pause-on-hidden
    xrface="mirroredDisplay: true;  meshGeometry: eyes, face, mouth; cameraDirection: front; allowedDevices: any;">

    <a-assets>
      <img id="heart1" src="https://images.augmentyourworld.com/LoveCoupons-G/Heart1.png" crossorigin="anonymous">
      <img id="heart2" src="https://images.augmentyourworld.com/LoveCoupons-G/Heart2.png" crossorigin="anonymous">
      <img id="heart3" src="https://images.augmentyourworld.com/LoveCoupons-G/Heart3.png" crossorigin="anonymous">
      <img id="heart4" src="https://images.augmentyourworld.com/LoveCoupons-G/Heart4.png" crossorigin="anonymous">
      <img id="heart5" src="https://images.augmentyourworld.com/LoveCoupons-G/Heart5.png" crossorigin="anonymous">
      <img id="heart6" src="https://images.augmentyourworld.com/LoveCoupons-G/Heart6.png" crossorigin="anonymous">
      <img id="heart7" src="https://images.augmentyourworld.com/LoveCoupons-G/Heart7.png" crossorigin="anonymous">
      <img id="heart8" src="https://images.augmentyourworld.com/LoveCoupons-G/Heart8.png" crossorigin="anonymous">
      <img id="heart9" src="https://images.augmentyourworld.com/LoveCoupons-G/Heart9.png" crossorigin="anonymous">
      <img id="heart10" src="https://images.augmentyourworld.com/LoveCoupons-G/Heart10.png" crossorigin="anonymous">
      <img id="heart11" src="https://images.augmentyourworld.com/LoveCoupons-G/Heart11.png" crossorigin="anonymous">
      <img id="heart12" src="https://images.augmentyourworld.com/LoveCoupons-G/Heart2.png" crossorigin="anonymous">
    </a-assets>


    <a-camera "rayOrigin: mouse" look-controls="enabled: false" wasd-controls="enabled: false" position="0 2 -3">
    </a-camera>

    <xrextras-capture-button capture-mode="fixed"></xrextras-capture-button>

    <xrextras-capture-config max-duration-ms="15000" max-dimension="1280" enable-end-card="true" cover-image-url="https://images.augmentyourworld.com/branding/SocialMediaLogo-HomePage-512.png" end-card-call-to-action="Try it at:" short-link=""
      footer-image-url="//cdn.8thwall.com/web/img/almostthere/v2/poweredby-horiz-white-2.svg" watermark-image-url="//cdn.8thwall.com/web/img/mediarecorder/8logo.png" watermark-max-width="100" watermark-max-height="10" watermark-location="bottomRight"
      file-name-prefix="my-capture-"></xrextras-capture-config>

    <xrextras-capture-preview action-button-share-text="Share" action-button-view-text="View" finalize-text="Exporting..."></xrextras-capture-preview>

    <xrextras-faceanchor>


      <xrextras-face-attachment point="leftEyebrowOuter">

        <!--    <a-entity>
          <a-circle src="#heart" transparent="true" position="0.25 -0.03 0" rotation="0 0 0" radius="1" segments="100" material="roughness: 0.8; metalness: 0.5;">
          </a-circle> -->



        <a-plane id="heart" clickhandler src="#heart1" position="-0.3 1.5 0" scale="2 1.5 2" side="back" depth-write="false" opacity="1" rotation="-3 5 -1" transparent="true" roughness="0.25">
        </a-plane>


      </xrextras-face-attachment>

    </xrextras-faceanchor>

    <!--<a-light type="directional" target="#face" position="0 1.2 3" intensity="0.4"></a-light>-->
    <a-light type="ambient" intensity="1"></a-light>


  </a-scene>
</body>

</html>